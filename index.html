
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>TS Order</title>
  <link rel="stylesheet" href="https://irynapio2023.github.io/style.css">

</head>


<body>
<div class="panda">
    <div class="ear"></div>
    <div class="face">
        <div class="eye-shade"></div>
        <div class="eye-white">
            <div class="eye-ball"></div>
        </div>
        <div class="eye-shade rgt"></div>
        <div class="eye-white rgt">
            <div class="eye-ball"></div>
        </div>
        <div class="nose"></div>
        <div class="mouth"></div>
    </div>
    <div class="body"> </div>
    <div class="foot">
        <div class="finger"></div>
    </div>
    <div class="foot rgt">
        <div class="finger"></div>
    </div>
</div>
<div class="form">
    <div class="hand"></div>
    <div class="hand rgt"></div>
    <h2 id="myFirstClick">Date of daily: <?php echo date('Y-m-d'); ?></h2>
    <div class="employers-main-flex">
        <div class="employers-numbers">
            <div class="numbers">1.</div>
            <div class="numbers">2.</div>
            <div class="numbers">3.</div>
            <div class="numbers">4.</div>
            <div class="numbers">5.</div>
            <div class="numbers">6.</div>
            <div class="numbers">7.</div>
            <div class="numbers">8.</div>
            <div class="numbers">9.</div>
            <div class="numbers">10.</div>
            <div class="numbers">11.</div>
            <div class="numbers">12.</div>
            <div class="numbers">13.</div>
        </div>
        <div class="employers-main">
            <?php
            function myOrder($array) {
                $currentIndex = count($array);
                while ($currentIndex !== 0) {
                    $randomIndex = rand(0, $currentIndex - 1);
                    $currentIndex--;
                    [$array[$currentIndex], $array[$randomIndex]] = [$array[$randomIndex], $array[$currentIndex]];
                }
                return $array;
            }

            function writeOrderAndDateToFile($arr) {
                $filePath = 'order.txt';
                $orderString = implode(', ', $arr);
                $currentDate = date('Y-m-d');
                $data = "Order: $orderString\nDate: $currentDate";

                if (file_put_contents($filePath, $data) !== false) {
                    // echo 'Порядок и дата успешно записаны в файл: ' . $filePath;
                } else {
                    echo 'Ошибка при записи порядка и даты в файл.';
                }
            }

            $orderFilePath = 'order.txt';

            // Проверяем, если файл с порядком существует
            if (file_exists($orderFilePath)) {
                // Читаем содержимое файла
                $fileContent = file_get_contents($orderFilePath);
                // Извлекаем порядок из содержимого файла
                preg_match('/Order: (.*)\n/', $fileContent, $orderMatches);
                if (!empty($orderMatches[1])) {
                    // Если порядок найден, разбиваем его по запятой в массив
                    $arr = explode(', ', $orderMatches[1]);
                } else {
                    // Если порядок не найден, генерируем новый порядок
                    $arr = generateNewOrder();
                    // Записываем порядок и дату в файл
                    writeOrderAndDateToFile($arr);
                }
            } else {
                // Если файл не существует, генерируем новый порядок
                $arr = generateNewOrder();
                // Записываем порядок и дату в файл
                writeOrderAndDateToFile($arr);
            }

            function generateNewOrder() {
                $arr = ['Iryna P', 'Yuliya', 'Krystyna', 'Olga', 'Elisa', 'Stefanos', 'Uli', 'Yigit', 'Anna', 'Iryna Z', 'Hasan', 'Thomas', 'Niko'];
                $arr = myOrder($arr);
                return $arr;
            }

            $employerClasses = ['employers1', 'employers2', 'employers3', 'employers4', 'employers5', 'employers6', 'employers7', 'employers8', 'employers9', 'employers10', 'employers11', 'employers12', 'employers13'];

            for ($i = 0; $i < count($arr); $i++) {
                echo '<div class="' . $employerClasses[$i] . '">' . $arr[$i] . '</div>';
            }
            ?>
        </div>
    </div>
</div>
<script  src="https://irynapio2023.github.io/app.js"></script>
</body>
</html> 
